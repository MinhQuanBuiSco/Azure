# Development override - use this with: docker-compose -f docker-compose.yml -f docker-compose.dev.yml up

services:
  # Backend with hot reload
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile.dev
      target: development
    command: uvicorn backend.main:app --host 0.0.0.0 --port 8000 --reload
    environment:
      - DEBUG=true
      - DATABASE_URL=postgresql+asyncpg://postgres:postgres@postgres:5432/fraud_detection
      - REDIS_HOST=redis
      - REDIS_PORT=6379
    volumes:
      - ./backend/src:/app/src:delegated
      - ./backend/alembic:/app/alembic:delegated
      - ./backend/.env:/app/.env:ro

  # Frontend with hot reload
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile.dev
      target: development
    command: npm run dev -- --host 0.0.0.0
    environment:
      - VITE_API_URL=http://localhost:8000
    ports:
      - "5173:5173"
    volumes:
      - ./frontend/src:/app/src:delegated
      - ./frontend/public:/app/public:delegated
      - ./frontend/.env:/app/.env:ro
